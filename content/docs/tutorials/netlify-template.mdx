---
title: 'Netlify template quick start'
subtitle: ''
---

## Overview

This guide will show you how to get up and running with the Netlify, Next.js, and PlanetScale starter template. The template includes the following features:

- Simple user admin dashboard
- [PlanetScale](https://planetscale.com/) database
- [Prisma ORM](https://www.prisma.io/) integration
- [Next.js authentication](https://nextjs.org/docs/authentication)
- One-click [deploy to Netlify](https://netlify.com)
- [Tailwind CSS](https://tailwindcss.com/) styling

<InfoBlock type='note'>
If you're coming from the <strong>Netlify Template</strong> and you already clicked deploy, you're in the right place! This tutorial will walk you through how to set up your PlanetScale database so that you can fill in the environment variables in the Netlify dashboard. You'll also learn how to set up your local environment so you can continue to develop and extend this starter template.
<br/>
<br/>
If you're <strong>starting fresh and haven't deployed yet</strong>, you can also start from the beginning of this tutorial, as it will cover Netlify deployment at the end.
</InfoBlock>

### Prerequisites

To follow along with this guide, you'll need the following:

- A [free PlanetScale account](https://auth.planetscale.com/sign-up)
- The [PlanetScale CLI](https://github.com/planetscale/cli#installation)
- [Yarn](https://yarnpkg.com/getting-started/install)
- [Node (LTS)](https://nodejs.org/en/)
- (optional) A [free Netlify account](https://app.netlify.com/signup)

## Set up the project locally

Whether you already deployed to Netlify or you're just getting started, it's a good idea to set up the project locally so that you can iterate on the template.

Clone the [`nextjs-planetscale-starter` repository](https://github.com/planetscale/nextjs-planetscale-starter). If you already went through the Netlify deployment, find the repository in your GitHub account and clone that one.

Enter into the folder and install the dependencies:

```bash
yarn install
```

Run the application with:

```bash
yarn next
```

Navigate to [http://localhost:3000/](http://localhost:3000/) in your browser to view the PlanetScale Next.js Starter app!

![Next.js PlanetScale Starter application homepage](/img/docs/planetscale-nextjs-application.png)

## Database setup

Next, you need to set up your PlanetScale database. If you don't already have a [PlanetScale account](https://docs.planetscale.com/concepts/billing#planetscale-plans), you can [sign up for a free one here](https://auth.planetscale.com/sign-up).

### Create your database

To begin, create a new database. You can either do this in the dashboard or using the [PlanetScale CLI](https://docs.planetscale.com/reference/planetscale-cli).

In the dashboard, click on the "**Create a database**" button. Name your database "`netlify-starter`", or whatever name you wish. Select the region closest to you, and click "**Create database**".

Alternatively, [sign in and create a database with the CLI](/tutorials/planetscale-quick-start-guide#quick-start-with-the-planetscale-cli) by running the following:

```bash
pscale database create <database-name> -regionSlug
```

The list of region slugs can be found in our [Regions documentation](https://docs.planetscale.com/concepts/regions#available-regions).

### Set up Prisma shadow branch

Next, you need to set up the [Prisma shadow branch](https://www.prisma.io/docs/concepts/components/prisma-migrate/shadow-database). This is a temporary database used for Prisma development.

To create the Prisma shadow branch:

- Click on your `netlify-starter` database in your PlanetScale dashboard.
- Click on the "**New branch**" button.
- Name the branch `shadow`.
- Leave the base branch as `main`.
- Select the region closest to you or your application.
- Click "**Create branch**".

### Connect to your database branches locally

To connect locally, make sure you've authenticated in the CLI. If not, follow the directions in the [sign in section of our quick start guide](/tutorials/planetscale-quick-start-guide#sign-in-to-your-account).

Next, connect to your `main` and `shadow` branches locally by running the following in your terminal in two separate tabs:

```bash
pscale connect <database-name> main --port <port>
```

```bash
pscale connect <database-name> shadow --port <port>
```

Choose any unused port. This tutorial uses `3309` and `3310`. You'll  see the response "Secure connection to database `netlify-starter` and branch `main` is established!" along with the local address that your application is on. Take note of that address for the next step.

## Set up environment variables

For the last part of set up, you need to fill in your environment variables. 

Make a copy of the `.env.example` file at the root of your project and rename it `.env`:

```bash
cp .env.example .env
```

The `DATABASE_URL` and `SHADOW_DATABASE_URL` values come from your PlanetScale database and will be in the following form:

`mysql://<user>@<address>:<port>/<database>` 

- `user` &mdash; the database user
- `address` &mdash; the local address returned in the previous step
- `port` &mdash; the port you specified in the previous step 
- `database` &mdash; the name of your database 

Below is an example of the `.env` file based on this tutorial:

```js
DATABASE_URL="mysql://root@127.0.0.1:3309/netlify-starter"
SHADOW_DATABASE_URL="mysql://root@127.0.0.1:3310/netlify-starter"
NEXTAUTH_URL=http://localhost:3000
NEXT_PUBLIC_BASE_URL=http://localhost:3000
BASE_URL=http://localhost:3000
```

Remember, these are the values for your **local environment**. The values needed for the Netlify environment variables will be covered shortly.

## Migrate the database

Now that your PlanetScale database is connected to your application, it's time to [run migrations](https://www.prisma.io/docs/guides/database/developing-with-prisma-migrate) and seed the database with some sample users.

In your terminal, run:

```bash
yarn db:migrate
```

Name your migration `initial-migration`. This will create a new migration file under `db/migrations`.

You can view the schema in your PlanetScale dashboard by clicking the `netlify-starter` database > "**Branches**" > `main` > "**Schema**" > "**Refresh schema**".

You'll now see the following tables:

- `Account`
- `Session`
- `User`
- `VerificationToken`
- `_prisma_migrations`

You can also verify it worked using the PlanetScale CLI. Run the following to start a MySQL shell (where `netlify-starter` is your database):

```bash
pscale shell netlify-starter main
```

Once in the shell, view the tables with:

```bash
SHOW tables
```

Type `exit` to exit the MySQL shell.

The database schema, `db/schema.prisma`, has been loaded and your PlanetScale database is now ready for data.

## Seed the database

To seed the database, run the following:

```bash
yarn db:seed
```

This will add three mock users to the `User` database, as described in `db/seed.ts`. To verify that they were added, click on the "**Console**" tab in your PlanetScale dashboard on the `main` branch of your `netlify-starter` database.

Run the following:

```bash
SELECT * from User;
```

You can also run this command from the CLI using the same `pscale shell` command mentioned above.

## Set up your admin account

Next, you need to set up your admin account for your application. Go to [https://localhost:3000/admin/setup](https://localhost:3000/admin/setup) in your browser and fill in the form to set up your account. This will be automatically saved to your PlanetScale database.

Creating an admin account gives you access to the `/admin` route in your application, which is the dashboard to manage your users.

Once you're signed in as an admin, navigate to [https://localhost:3000/admin](https://localhost:3000/admin) to check it out.

## Deploy to Netlify

Once you're happy with your application, you can deploy it to Netlify. Make sure you push all your changes to GitHub so Netlify can connect to your repo.

The one-click deploy button allows you to connect Netlify to your GitHub account to clone the `nextjs-planetscale-starter` repository and deploy it automatically. Be sure to [sign up for a Netlify account](https://app.netlify.com/signup) before clicking the deploy button.

[![Deploy to Netlify button](https://www.netlify.com/img/deploy/button.svg)](https://app.netlify.com/start/deploy?repository=https://github.com/planetscale/nextjs-planetscale-starter)

By clicking the above button, you will be navigated to the Netlify’s direct deploy page with the project’s repository passed as a parameter in the URL. Click the Connect to GitHub button, name your repository and enter....

TODO what environment variables are needed for Netlify and how to get them

```js
// Get this one from inside PlanetScale connect modal, Prisma dropdown and copy URL from snippet
DATABASE_URL=
// use https://generate-secret.now.sh/32 to create one, never actually used, but required
NEXTAUTH_SECRET=
```

After the Netlify site is created and you have a base URL, you will need to fill out two more environment variables with this base URL (for example: https://laughing-fermat-f171ce.netlify.app/)

```js
NEXTAUTH_URL=
BASE_URL=
```

Note: The initial build will fail if the database is not set up following TODO

Once it is live, go to the `/admin/setup` page to create an admin account to get started.

## Next.js authentication


## Customize and extend